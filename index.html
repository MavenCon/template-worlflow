<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Maven Index</title>
	<!-- 在页面渲染前应用主题，防止闪烁 -->
	<script>
		(function () {
			const savedTheme = localStorage.getItem('theme');
			if (!(savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches))) return;
			document.documentElement.setAttribute('data-theme', 'dark');
			document.documentElement.classList.add('theme-transition-disabled');
		})();
	</script>
	<style>
        :root {
            --body-bg: #fff;
            --text-color: #333;
            --heading-color: #0366d6;
            --link-color: #0366d6;
            --border-color: #eee;
            --file-icon-color: #444;
            --file-date-color: #666;
            --file-size-color: #666;
            --breadcrumb-bg: #f8f9fa;
        }

        [data-theme="dark"] {
            --body-bg: #121212;
            --text-color: #e0e0e0;
            --heading-color: #58a6ff;
            --link-color: #58a6ff;
            --border-color: #333;
            --file-icon-color: #aaa;
            --file-date-color: #999;
            --file-size-color: #999;
            --breadcrumb-bg: #1e1e1e;
        }

        /* 禁用初始加载时的过渡动画 */
        .theme-transition-disabled * {
            transition: none !important;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--body-bg);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        h1, h2, h3 {
            color: var(--heading-color);
        }

        a {
            color: var(--link-color);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .file-list {
            list-style-type: none;
            padding: 0;
        }

        .file-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }

        .file-icon {
            margin-right: 10px;
            width: 20px;
            text-align: center;
            color: var(--file-icon-color);
        }

        .folder-icon {
            color: #ffc107;
        }

        .file-icon.xml {
            color: #ff5722;
        }

        .file-icon.pom {
            color: #2196f3;
        }

        .file-date, .file-size {
            color: var(--file-date-color);
            font-size: 0.85em;
            margin-left: 10px;
        }

        .file-size {
            color: var(--file-size-color);
        }

        .file-name {
            flex-grow: 1;
        }

        /* SVG 图标样式 */
        .svg-icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            stroke-width: 0;
            stroke: currentColor;
            fill: currentColor;
            vertical-align: -0.125em;
        }

        .svg-icon.fa-pulse {
            animation: fa-spin 2s infinite linear;
        }

        @keyframes fa-spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .svg-icon.fa-2x {
            width: 2em;
            height: 2em;
        }

        /* 暗色模式开关样式 */
        .theme-switch-wrapper {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            z-index: 100;
        }

        .theme-switch {
            display: inline-block;
            position: relative;
            width: 60px;
            height: 34px;
        }

        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        input:checked + .slider {
            background-color: #2196F3;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* 主题图标样式 */
        .theme-icon {
            height: 16px;
            width: 16px;
            z-index: 2;
            position: absolute;
            top: 9px;
            transition: opacity 0.3s, transform 0.4s;
        }

        /* 太阳图标总是定位在左侧滑块位置 */
        .sun-icon {
            left: 9px;
            color: #555;
        }

        /* 月亮图标总是定位在右侧滑块位置 */
        .moon-icon {
            left: 35px; /* 这个值等于 左侧padding(4px) + 滑块宽度(26px) + 偏移量(5px) */
            color: #1e3a8a;
        }

        /* 亮色模式下显示太阳图标，隐藏月亮图标 */
        input:not(:checked) + .slider .sun-icon {
            opacity: 1;
        }

        input:not(:checked) + .slider .moon-icon {
            opacity: 0;
        }

        /* 暗色模式下显示月亮图标，隐藏太阳图标 */
        input:checked + .slider .sun-icon {
            opacity: 0;
        }

        input:checked + .slider .moon-icon {
            opacity: 1;
        }

        @media (max-width: 600px) {
            .theme-switch-wrapper {
                top: 10px;
                right: 10px;
            }

            .theme-switch {
                width: 50px;
                height: 28px;
            }

            .slider:before {
                height: 20px;
                width: 20px;
            }

            input:checked + .slider:before {
                transform: translateX(22px);
            }
        }
	</style>
	<!-- SVG 图标定义 -->
	<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
		<!-- 暗色模式图标 - 月亮 -->
		<symbol id="icon-moon" viewBox="0 0 384 512">
			<path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/>
		</symbol>
		<!-- 暗色模式图标 - 太阳 -->
		<symbol id="icon-sun" viewBox="0 0 512 512">
			<path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"/>
		</symbol>
		<!-- 箱子存档图标 -->
		<symbol id="icon-box-archive" viewBox="0 0 512 512">
			<path d="M32 32H480c17.7 0 32 14.3 32 32V96c0 17.7-14.3 32-32 32H32C14.3 128 0 113.7 0 96V64C0 46.3 14.3 32 32 32zm0 128H480V416c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16H336c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"/>
		</symbol>
		<!-- 加载图标 -->
		<symbol id="icon-spinner" viewBox="0 0 512 512">
			<path d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"/>
		</symbol>
		<!-- 打开的文件夹图标 -->
		<symbol id="icon-folder-open" viewBox="0 0 576 512">
			<path d="M88.7 223.8L0 375.8V96C0 60.7 28.7 32 64 32H181.5c17 0 33.3 6.7 45.3 18.7l26.5 26.5c12 12 28.3 18.7 45.3 18.7H416c35.3 0 64 28.7 64 64v32H144c-22.8 0-43.8 12.1-55.3 31.8zm27.6 16.1C122.1 230 132.6 224 144 224H544c11.5 0 22 6.1 27.7 16.1s5.7 22.2-.1 32.1l-112 192C453.9 474 443.4 480 432 480H32c-11.5 0-22-6.1-27.7-16.1s-5.7-22.2 .1-32.1l112-192z"/>
		</symbol>
		<!-- 文件夹图标 -->
		<symbol id="icon-folder" viewBox="0 0 512 512">
			<path d="M64 480H448c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H288c-10.1 0-19.6-4.7-25.6-12.8L243.2 57.6C231.1 41.5 212.1 32 192 32H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64z"/>
		</symbol>
		<!-- 代码文件图标 -->
		<symbol id="icon-file-code" viewBox="0 0 384 512">
			<path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM153 289l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L71 337c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM265 289c9.4-9.4 24.6-9.4 33.9 0l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9z"/>
		</symbol>
		<!-- 文本文件图标 -->
		<symbol id="icon-file-alt" viewBox="0 0 384 512">
			<path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"/>
		</symbol>
		<!-- 指纹图标 -->
		<symbol id="icon-fingerprint" viewBox="0 0 512 512">
			<path d="M256.12 245.96c-13.25 0-24 10.74-24 24 1.14 72.25-8.14 141.9-27.7 211.55-2.73 9.72 2.15 30.49 23.12 30.49 10.48 0 20.11-6.92 23.09-17.52 13.53-47.91 31.04-125.41 29.48-224.52.01-13.25-10.73-24-23.99-24zm-.86-81.73C194 164.16 151.25 211.3 152.1 265.32c.75 47.94-3.75 95.91-13.37 142.55-2.69 12.98 5.67 25.69 18.64 28.36 13.05 2.67 25.67-5.66 28.36-18.64 10.34-50.09 15.17-101.58 14.37-153.02-.41-25.95 19.92-52.49 54.45-52.34 31.31.47 57.15 25.34 57.62 55.47.77 48.05-2.81 96.33-10.61 143.55-2.17 13.06 6.69 25.42 19.76 27.58 19.97 3.33 26.81-15.1 27.58-19.77 8.28-50.03 12.06-101.21 11.27-152.11-.88-55.8-47.94-101.88-104.91-102.72zm-110.69-19.78c-10.3-8.34-25.37-6.8-33.76 3.48-25.62 31.5-39.39 71.28-38.75 112 .59 37.58-2.47 75.27-9.11 112.05-2.34 13.05 6.31 25.53 19.36 27.89 20.11 3.5 27.07-14.81 27.89-19.36 7.19-39.84 10.5-80.66 9.86-121.33-.47-29.88 9.2-57.88 28-80.97 8.35-10.28 6.79-25.39-3.49-33.76zm109.47-62.33c-15.41-.41-30.87 1.44-45.78 4.97-12.89 3.06-20.87 15.98-17.83 28.89 3.06 12.89 16 20.83 28.89 17.83 11.05-2.61 22.47-3.77 34-3.69 75.43 1.13 137.73 61.5 138.88 134.58.59 37.88-1.28 76.11-5.58 113.63-1.5 13.17 7.95 25.08 21.11 26.58 16.72 1.95 25.51-11.88 26.58-21.11a929.06 929.06 0 0 0 5.89-119.85c-1.56-98.75-85.07-180.33-186.16-181.83zm252.07 121.45c-2.86-12.92-15.51-21.2-28.61-18.27-12.94 2.86-21.12 15.66-18.26 28.61 4.71 21.41 4.91 37.41 4.7 61.6-.11 13.27 10.55 24.09 23.8 24.2h.2c13.17 0 23.89-10.61 24-23.8.18-22.18.4-44.11-5.83-72.34zm-40.12-90.72C417.29 43.46 337.6 1.29 252.81.02 183.02-.82 118.47 24.91 70.46 72.94 24.09 119.37-.9 181.04.14 246.65l-.12 21.47c-.39 13.25 10.03 24.31 23.28 24.69.23.02.48.02.72.02 12.92 0 23.59-10.3 23.97-23.3l.16-23.64c-.83-52.5 19.16-101.86 56.28-139 38.76-38.8 91.34-59.67 147.68-58.86 69.45 1.03 134.73 35.56 174.62 92.39 7.61 10.86 22.56 13.45 33.42 5.86 10.84-7.62 13.46-22.59 5.84-33.43z"/>
		</symbol>
		<!-- 盾牌图标 -->
		<symbol id="icon-shield-alt" viewBox="0 0 512 512">
			<path d="M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.7 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0zm0 66.8V444.8C394 378 431.1 230.1 432 141.4L256 66.8l0 0z"/>
		</symbol>
		<!-- 文件图标 -->
		<symbol id="icon-file" viewBox="0 0 384 512">
			<path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64z"/>
		</symbol>
		<!-- 文件大小图标 - 硬盘图标 -->
		<symbol id="icon-hdd" viewBox="0 0 576 512">
			<path d="M0 96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm112 288a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"/>
		</symbol>
		<!-- 信息圆圈图标 -->
		<symbol id="icon-info-circle" viewBox="0 0 512 512">
			<path d="M256 512A256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/>
		</symbol>
		<!-- 时钟图标 -->
		<symbol id="icon-clock" viewBox="0 0 512 512">
			<path d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/>
		</symbol>
		<!-- 警告三角图标 -->
		<symbol id="icon-exclamation-triangle" viewBox="0 0 512 512">
			<path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>
		</symbol>
	</svg>
</head>
<body>
<!-- 添加暗色模式开关 -->
<div class="theme-switch-wrapper">
	<label class="theme-switch">
		<input type="checkbox" id="theme-toggle">
		<span class="slider">
			<svg class="svg-icon theme-icon sun-icon">
				<use xlink:href="#icon-sun"></use>
			</svg>
			<svg class="svg-icon theme-icon moon-icon">
				<use xlink:href="#icon-moon"></use>
			</svg>
		</span>
	</label>
</div>
<h1>
	<svg class="svg-icon">
		<use xlink:href="#icon-box-archive"></use>
	</svg>
	Maven Index
</h1>
<div id="content">
	<!-- 内容将通过 JavaScript 动态生成 -->
	<div style="text-align: center; padding: 20px;">
		<svg class="svg-icon fa-pulse fa-2x">
			<use xlink:href="#icon-spinner"></use>
		</svg>
		<p>Loading...</p>
	</div>
</div>
<script>
	document.addEventListener('DOMContentLoaded', function () {
		// 暗色模式切换功能
		const themeToggle = document.getElementById('theme-toggle');
		const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
		// 获取当前保存的主题或系统偏好
		const getCurrentTheme = () => {
			const savedTheme = localStorage.getItem('theme');
			if (savedTheme) {
				return savedTheme;
			}
			return prefersDarkScheme.matches ? 'dark' : 'light';
		};
		// 应用主题
		const applyTheme = (theme) => {
			if (theme === 'dark') {
				document.documentElement.setAttribute('data-theme', 'dark');
				themeToggle.checked = true;
			} else {
				document.documentElement.removeAttribute('data-theme');
				themeToggle.checked = false;
			}
		};
		// 切换主题
		const toggleTheme = () => {
			const theme = themeToggle.checked ? 'dark' : 'light';
			applyTheme(theme);
			localStorage.setItem('theme', theme);
		};
		// 初始化主题
		applyTheme(getCurrentTheme());
		// 监听主题切换事件
		themeToggle.addEventListener('change', toggleTheme);
		// 监听系统主题变化
		prefersDarkScheme.addEventListener('change', (e) => {
			if (!localStorage.getItem('theme')) {
				applyTheme(e.matches ? 'dark' : 'light');
			}
		});
		// 获取当前URL及参数
		const urlParams = new URLSearchParams(window.location.search);
		const baseUrl = window.location.href.split('?')[0];
		// 从URL参数获取当前目录，如果没有则使用根目录
		let currentDir = urlParams.get('path') || '';
		// 异步加载目录内容
		async function loadDirectoryContents(dirPath = '') {
			// 从动态生成的仓库结构数据中读取内容
			return scanDirectoryFromData(dirPath);
		}
		// 从数据中获取目录内容
		function scanDirectoryFromData(dirPath) {
			// 使用全局的 repoStructure 变量
			if (window.repoStructure) {
				console.log('仓库结构数据:', window.repoStructure);
				console.log('请求路径:', dirPath);
				if (dirPath in window.repoStructure) return window.repoStructure[dirPath];
				else console.log('路径不存在于仓库结构中');
			} else console.error('仓库结构数据尚未加载');
			// 如果无法获取数据，则返回空数组
			return [];
		}
		// 格式化文件大小
		function formatFileSize(bytes) {
			if (bytes === 0) return '0 Bytes';
			const k = 1024;
			const sizes = ['Bytes', 'KB', 'MB', 'GB'];
			const i = Math.floor(Math.log(bytes) / Math.log(k));
			return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
		}
		// 获取文件类型对应的图标
		function getFileIcon(fileName) {
			switch (fileName.split('.').pop().toLowerCase()) {
				case 'xml':
					return '<svg class="svg-icon file-icon xml"><use xlink:href="#icon-file-code"></use></svg>';
				case 'pom':
					return '<svg class="svg-icon file-icon pom"><use xlink:href="#icon-file-alt"></use></svg>';
				case 'md5':
					return '<svg class="svg-icon file-icon md5"><use xlink:href="#icon-fingerprint"></use></svg>';
				case 'sha1':
				case 'sha256':
				case 'sha512':
					return '<svg class="svg-icon file-icon sha1"><use xlink:href="#icon-shield-alt"></use></svg>';
				default:
					return '<svg class="svg-icon file-icon"><use xlink:href="#icon-file"></use></svg>';
			}
		}
		// 生成可点击的路径标题
		function generateClickablePath(path) {
			if (!path) return '<h2><svg class="svg-icon"><use xlink:href="#icon-folder-open"></use></svg> 根目录</h2>';
			const parts = path.split('/');
			let html = '<h2><svg class="svg-icon"><use xlink:href="#icon-folder-open"></use></svg> ';
			html += `<a href="${baseUrl}">根目录</a>`;
			let currentPath = '';
			for (const part of parts) {
				if (!part) continue;
				currentPath += (currentPath ? '/' : '') + part;
				html += ` / <a href="${baseUrl}?path=${encodeURIComponent(currentPath)}">${part}</a>`;
			}
			html += '</h2>';
			return html;
		}
		// 生成内容HTML
		async function renderContent() {
			const contentElement = document.getElementById('content');
			// 加载当前目录的内容
			const files = await loadDirectoryContents(currentDir);
			let html = '';
			// 添加可点击的路径标题
			html += generateClickablePath(currentDir);
			// 列出文件和目录
			html += '<ul class="file-list">';
			// 如果在子目录中，添加返回上层目录项
			if (currentDir) {
				const parentDir = currentDir.includes('/') ?
					currentDir.substring(0, currentDir.lastIndexOf('/')) :
					'';
				html += `<li>
						<a href="${baseUrl}${parentDir ? '?path=' + encodeURIComponent(parentDir) : ''}">
							<svg class="svg-icon folder-icon file-icon"><use xlink:href="#icon-folder"></use></svg>
						</a>
						<div class="file-name"><a href="${baseUrl}${parentDir ? '?path=' + encodeURIComponent(parentDir) : ''}">..</a></div>
					</li>`;
			}
			// 检查目录是否为空（不包括".."项）
			if (files.length === 0) html += '<li><svg class="svg-icon"><use xlink:href="#icon-info-circle"></use></svg> 此目录为空</li>';
			else {
				// 首先显示根目录 - 使用size=0来识别目录
				const folders = files.filter(f => f.size === 0);
				folders.forEach(folder => {
					const folderPath = currentDir ? currentDir + '/' + folder.name : folder.name;
					html += `<li>
							<a href="${baseUrl}?path=${encodeURIComponent(folderPath)}">
								<svg class="svg-icon folder-icon file-icon"><use xlink:href="#icon-folder"></use></svg>
							</a>
							<div class="file-name"><a href="${baseUrl}?path=${encodeURIComponent(folderPath)}">${folder.name}</a></div>
							<span class="file-date"><svg class="svg-icon"><use xlink:href="#icon-clock"></use></svg> ${new Date(folder.lastModified).toLocaleString()}</span>
						</li>`;
				});
				// 然后显示文件 - 使用size>0来识别文件
				const onlyFiles = files.filter(f => f.size > 0);
				onlyFiles.forEach(file => {
					// 确定正确的文件路径，根据currentDir的第一部分决定是哪个仓库目录
					let filePath;
					filePath = currentDir ? currentDir + '/' + file.name : file.name;
					const fileSize = formatFileSize(file.size);
					const formattedDate = new Date(file.lastModified).toLocaleString();
					html += `<li>
							<a href="${baseUrl}${filePath}" target="_blank">
								${getFileIcon(file.name)}
							</a>
							<div class="file-name"><a href="${baseUrl}${filePath}" target="_blank">${file.name}</a></div>
							<span class="file-size"><svg class="svg-icon"><use xlink:href="#icon-hdd"></use></svg> ${fileSize}</span>
							<span class="file-date"><svg class="svg-icon"><use xlink:href="#icon-clock"></use></svg> ${formattedDate}</span>
						</li>`;
				});
			}
			html += '</ul>';
			contentElement.innerHTML = html;
		}
		// 初始化页面由外部JSON文件加载后调用
		window.renderContent = renderContent;
	});
	// 从JSON文件加载仓库结构数据
	fetch('./index-cache.json')
		.then(response => response.json())
		.then(repoStructure => {
			window.repoStructure = repoStructure;
			// 初始化页面
			window.renderContent();
		})
		.catch(error => {
			document.getElementById('content').innerHTML =
				`<div class="error"><svg class="svg-icon"><use xlink:href="#icon-exclamation-triangle"></use></svg> 加载仓库数据失败: ${error.message}</div>`;
		});
</script>
</body>
</html>
